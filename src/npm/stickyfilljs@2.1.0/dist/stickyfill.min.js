!function(f,l){"use strict";function h(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function d(t){return parseFloat(t)||0}function c(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function t(){function t(){f.pageXOffset!=r.left?(r.top=f.pageYOffset,r.left=f.pageXOffset,g.refreshAll()):f.pageYOffset!=r.top&&(r.top=f.pageYOffset,r.left=f.pageXOffset,a.forEach(function(t){return t._recalcPosition()}))}function e(){i=setInterval(function(){a.forEach(function(t){return t._fastCheck()})},500)}var i,o,n;s||(s=!0,t(),f.addEventListener("scroll",t),f.addEventListener("resize",g.refreshAll),f.addEventListener("orientationchange",g.refreshAll),n=o=i=void 0,"hidden"in l?(o="hidden",n="visibilitychange"):"webkitHidden"in l&&(o="webkitHidden",n="webkitvisibilitychange"),n?(l[o]||e(),l.addEventListener(n,function(){l[o]?clearInterval(i):e()})):e())}var e,i=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t},p=!1,o=void 0!==f;function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}o&&f.getComputedStyle?(e=l.createElement("div"),["","-webkit-","-moz-","-ms-"].some(function(t){try{e.style.position=t+"sticky"}catch(t){}return""!=e.style.position})&&(p=!0)):p=!0;var s=!1,u="undefined"!=typeof ShadowRoot,r={top:null,left:null},a=[],m=(i(_,[{key:"refresh",value:function(){var t,e,i,o,n,s,r,a;p||this._removed||(this._active&&this._deactivate(),t=this._node,e={position:(i=getComputedStyle(t)).position,top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat},isNaN(parseFloat(e.top))||"table-cell"==e.display||"none"==e.display||(this._active=!0,a=t.style.position,"sticky"!=i.position&&"-webkit-sticky"!=i.position||(t.style.position="static"),i=t.parentNode,o=u&&i instanceof ShadowRoot?i.host:i,n=t.getBoundingClientRect(),r=o.getBoundingClientRect(),s=getComputedStyle(o),this._parent={node:o,styles:{position:o.style.position},offsetHeight:o.offsetHeight},this._offsetToWindow={left:n.left,right:l.documentElement.clientWidth-n.right},this._offsetToParent={top:n.top-r.top-d(s.borderTopWidth),left:n.left-r.left-d(s.borderLeftWidth),right:-n.right+r.right-d(s.borderRightWidth)},this._styles={position:a,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight},a=d(e.top),this._limits={start:n.top+f.pageYOffset-a,end:r.top+f.pageYOffset+o.offsetHeight-d(s.borderBottomWidth)-t.offsetHeight-a-d(e.marginBottom)},"absolute"!=(r=s.position)&&"relative"!=r&&(o.style.position="relative"),this._recalcPosition(),(a=this._clone={}).node=l.createElement("div"),h(a.node.style,{width:n.right-n.left+"px",height:n.bottom-n.top+"px",marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,cssFloat:e.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),i.insertBefore(a.node,t),a.docOffsetTop=c(a.node)))}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=r.top<=this._limits.start?"start":r.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":h(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":h(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":h(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(1<Math.abs(c(this._clone.node)-this._clone.docOffsetTop)||1<Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight))&&this.refresh()}},{key:"_deactivate",value:function(){var e=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,h(this._node.style,this._styles),delete this._styles,a.some(function(t){return t!==e&&t._parent&&t._parent.node===e._parent.node})||h(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var i=this;this._deactivate(),a.some(function(t,e){if(t._node===i._node)return a.splice(e,1),!0}),this._removed=!0}}]),_),g={stickies:a,Sticky:m,forceSticky:function(){p=!1,t(),this.refreshAll()},addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<a.length;e++)if(a[e]._node===t)return a[e];return new m(t)},add:function(i){if((i=i instanceof HTMLElement?[i]:i).length){for(var o=[],t=0;t<i.length;t++)!function(t){var e=i[t];e instanceof HTMLElement?a.some(function(t){if(t._node===e)return o.push(t),!0})||o.push(new m(e)):o.push(void 0)}(t);return o}},refreshAll:function(){a.forEach(function(t){return t.refresh()})},removeOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}a.some(function(t){if(t._node===e)return t.remove(),!0})},remove:function(i){if((i=i instanceof HTMLElement?[i]:i).length)for(var t=0;t<i.length;t++)!function(t){var e=i[t];a.some(function(t){if(t._node===e)return t.remove(),!0})}(t)},removeAll:function(){for(;a.length;)a[0].remove()}};function _(e){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");if(!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(a.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,a.push(this),this.refresh()}p||t(),"undefined"!=typeof module&&module.exports?module.exports=g:o&&(f.Stickyfill=g)}(window,document);