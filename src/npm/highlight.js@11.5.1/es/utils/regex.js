function escape(e){return new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function source(e){return e?"string"==typeof e?e:e.source:null}function lookahead(e){return concat("(?=",e,")")}function anyNumberOfTimes(e){return concat("(?:",e,")*")}function optional(e){return concat("(?:",e,")?")}function concat(...e){return e.map(e=>source(e)).join("")}function stripOptionsFromArgs(e){var n=e[e.length-1];return"object"==typeof n&&n.constructor===Object?(e.splice(e.length-1,1),n):{}}function either(...e){return"("+(stripOptionsFromArgs(e).capture?"":"?:")+e.map(e=>source(e)).join("|")+")"}function countMatchGroups(e){return new RegExp(e.toString()+"|").exec("").length-1}function startsWith(e,n){e=e&&e.exec(n);return e&&0===e.index}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(e,{joinWith:n}){let c=0;return e.map(e=>{var n=c+=1;let t=source(e),r="";for(;0<t.length;){var o=BACKREF_RE.exec(t);if(!o){r+=t;break}r+=t.substring(0,o.index),t=t.substring(o.index+o[0].length),"\\"===o[0][0]&&o[1]?r+="\\"+String(Number(o[1])+n):(r+=o[0],"("===o[0]&&c++)}return r}).map(e=>`(${e})`).join(n)}export{_rewriteBackreferences,anyNumberOfTimes,concat,countMatchGroups,either,escape,lookahead,optional,source,startsWith};